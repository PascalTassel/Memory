(()=>{var e={223:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var s=function(){function e(n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===t(n))for(var s in n)this[s]=n[s];this.buttons=[{action:"Replay",label:"Rejouer"},{action:"Rank",label:"Enregistrer mon score"}];var r=this;for(i in this.buttons)this["btn".concat(this.buttons[i].action)]=document.createElement("button"),this["btn".concat(this.buttons[i].action)].setAttribute("type","button"),this["btn".concat(this.buttons[i].action)].textContent=this.buttons[i].label,this["btn".concat(this.buttons[i].action)].classList.add("hide"),this.footer.appendChild(this["btn"+this.buttons[i].action]);this.btnRank.onclick=function(e){var t=r.body.querySelector("input").value,n=new CustomEvent("on set name",{detail:{name:t}});r.body.dispatchEvent(n),r.hide()},this.btnReplay.onclick=function(e){var t=new CustomEvent("on replay",{detail:{}});r.body.dispatchEvent(t),r.hide()}}var s,r,o;return s=e,(r=[{key:"hide",value:function(){for(i in this.overlay.classList.remove("show"),this.elem.className="",this.body.innerHTML="",this.buttons)this["btn"+this.buttons[i].action].classList.add("hide")}},{key:"show",value:function(e){this.body.innerHTML=e,this.overlay.classList.add("show")}},{key:"rank",value:function(e,t){var n="<p>Félicitations, vous avez gagné !<br>Votre temps est de <strong>".concat(e,"</strong>.</p>")+"<p>Vous occupez la <strong>".concat(t+(1==t?"ère":"ème"),"</strong> place du classement&nbsp;!</p>")+'<p><input type="text" name="pseudo" placeholder="Votre pseudo"></p>';this.btnRank.classList.remove("hide"),this.elem.classList.add("rank"),this.show(n)}},{key:"loose",value:function(){this.btnReplay.classList.remove("hide"),this.elem.classList.add("loose"),this.show("<p>Désolé, le temps imparti est écoulé !</p>")}},{key:"scores",value:function(e){var t="<h1>Meilleurs scores</h1><table><tbody>";for(var n in e)t+="<tr>"+'<td class="rank">'.concat(parseInt(n)+1,"</td>")+'<td class="player"><strong>'.concat(e[n].name,"</strong></td>")+'<td class="date">'.concat(e[n].date.split(" ")[0]," <small>").concat(e[n].date.split(" ")[1],"</small></td>")+'<td class="score"><strong>'.concat(e[n].time,"</strong></td>")+"</tr>";t+="</tbody></table>",this.btnReplay.classList.remove("hide"),this.elem.classList.add("scores"),this.show(t)}}])&&n(s.prototype,r),o&&n(s,o),e}();e.exports=s},772:e=>{e.exports=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bg_position=n,this.value=t,this.isActive=!0,this.isClickable=!1,this.isFlipped=!1}},963:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var s=function(){function e(n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===t(n))for(var s in n)this[s]=n[s];this.elapsed_time=0,this.durationSecs.innerHTML=this.pad(6e3*this.duration%60),this.durationMins.innerHTML=this.pad(parseInt(6e3*this.duration/6e3,10))}var s,i,r;return s=e,(i=[{key:"displayTime",value:function(){var e=this.getTime();this.countUpSecs.innerHTML=e.secs,this.countUpMins.innerHTML=e.mins}},{key:"getTime",value:function(){var e=this.elapsed_time,t=this.pad(parseInt(e%100,10)),n=this.pad(parseInt(e/100,10));return{mins:this.pad(parseInt(n/60,10)),secs:this.pad(parseInt(n%60,10)),tenths:t}}},{key:"pad",value:function(e){return e>9?e:"0".concat(e)}},{key:"start",value:function(){var e=this;this.interval=setInterval((function(){e.elapsed_time++,e.displayTime()}),10)}},{key:"stop",value:function(){clearInterval(this.interval)}},{key:"reset",value:function(){this.elapsed_time=0,this.countUpSecs.innerHTML="00",this.countUpMins.innerHTML="00"}}])&&n(s.prototype,i),r&&n(s,r),e}();e.exports=s},898:e=>{e.exports=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=rankingLimit,this.scores=[],this.url=t;var s=this,i=new XMLHttpRequest;i.open("GET",this.url),i.responseType="json",i.onload=function(){s.scores=i.response,s.scores.sort((function(e,t){return e.seconds-t.seconds})),console.log(s.scores)},i.send()}},13:(e,t,n)=>{function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var r=n(772),o=n(963),a=n(80),c=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===s(t))for(var n in t)this[n]=t[n];this.counterSettings.duration=this.duration,this.cards=[],this.counter=new o(this.counterSettings),this.nb_visible_cards=0,this.progress=new a(this.progressSettings),this.selected_cards=[],this.score=6e3*this.duration,this.isWin=!1;for(var i=1;i<this.nb_occurences;)this.cards_values=this.cards_values.concat(this.cards_values),i++;for(var c=0;c<this.cards_values.length;c++){var l=this.cards_values[c],u="0px ".concat(-1*this.bg_card_increment*c,"px"),d=new r(l,u);this.cards.push(d)}this.launch()}var t,n,c;return t=e,(n=[{key:"displayCards",value:function(){var e=this;this.cards.sort((function(){return Math.random()-.5}));var t=function(){var t=e.cards[n],s=document.createElement("li"),i=document.createElement("div"),r=document.createElement("div"),o=e;i.classList.add("front"),i.style.backgroundPosition=t.bg_position,r.classList.add("back"),r.innerHTML="",s.appendChild(r),s.appendChild(i),s.addEventListener("click",(function(e){var t=this,n=Array.from(t.closest("ul").children).indexOf(t),s=o.cards[n];return s.isFlipped=!0,!!s.isClickable&&(s.isClickable=!1,t.classList.add("is-flipped"),o.selected_cards.push(s.value),o.selected_cards.length==o.nb_occurences&&o.checkFlippedCards(),!0)})),e.elem.appendChild(s)};for(var n in this.cards)t()}},{key:"checkFlippedCards",value:function(){var e=this,t=e.selected_cards[0]===e.selected_cards[1];for(var n in this.cards){var s=this.elem.querySelectorAll("li")[n];t&&this.cards[n].isFlipped?(this.cards[n].isActive=!1,s.classList.add("blink")):this.cards[n].isActive&&!1===this.cards[n].isFlipped&&s.classList.add("is-disabled")}if(t&&(this.nb_visible_cards+=this.selected_cards.length,this.nb_visible_cards===this.cards.length))return this.isWin=!0,void this.gameOver();this.selected_cards=[],setTimeout((function(){for(var t in e.cards)e.cards[t].isActive&&(e.cards[t].isClickable=!0,e.cards[t].isFlipped=!1,e.elem.querySelectorAll("li")[t].classList.remove("is-flipped"),e.elem.querySelectorAll("li")[t].classList.remove("is-disabled"))}),1e3*e.visible_duration)}},{key:"launch",value:function(){var e=this;for(var t in this.displayCards(),this.cards)this.cards[t].isClickable=!0;this.counter.start(),this.checkCounter=setInterval((function(){e.counter.elapsed_time===6e3*e.duration&&e.gameOver();var t=(e.counter.elapsed_time+1)/(6e3*e.duration)*100;e.progress.move(t)}),10)}},{key:"gameOver",value:function(){for(var e in clearInterval(this.checkCounter),this.counter.stop(),this.cards)this.cards[e].isActive&&(this.cards[e].isClickable=!1);this.score=this.counter.elapsed_time;var t=this.counter.getTime(),n=new CustomEvent("on game over",{detail:{time:"".concat(t.mins,":").concat(t.secs,":").concat(t.tenths)}});this.elem.dispatchEvent(n)}},{key:"replay",value:function(){this.elem.innerHTML="",this.counter.reset(),this.progress.reset(),this.launch()}}])&&i(t.prototype,n),c&&i(t,c),e}();e.exports=c},80:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var s=function(){function e(n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===t(n))for(var s in n)this[s]=n[s]}var s,i,r;return s=e,(i=[{key:"move",value:function(e){this.bar.style.width="".concat(e,"%")}},{key:"reset",value:function(){this.bar.removeAttribute("style")}}])&&n(s.prototype,i),r&&n(s,r),e}();e.exports=s},595:(e,t,n)=>{"use strict";n.r(t)}},t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(595);var e=n(223),t=(n(898),n(13)),s={alert:{overlay:document.querySelector("#overlay"),elem:document.querySelector("#alert"),body:document.querySelector(".alert-body"),footer:document.querySelector(".alert-footer")},memory:{duration:10,bg_card_increment:100,cards_values:["red apple","banana","orange","green lemon","pomegranate","apricot","yellow lemon","strawberry","green apple","peach","grapes","watermelon","plum","pear","red cherries","raspberry","mango","yellow cherries"],elem:document.querySelector("#cards"),nb_occurences:2,visible_duration:2,counterSettings:{countUpMins:document.querySelector("#count-up").querySelector(".mins"),countUpSecs:document.querySelector("#count-up").querySelector(".secs"),durationMins:document.querySelector("#duration").querySelector(".mins"),durationSecs:document.querySelector("#duration").querySelector(".secs")},progressSettings:{bar:document.querySelector(".bar")}},rankingLimit:5},i=new e(s.alert),r=new t(s.memory);r.elem.addEventListener("on game over",(function(e){if(!1===r.isWin)i.loose();else{var t=e.detail.time,n=r.score,s=new XMLHttpRequest;s.open("GET","datas/rank/".concat(n),!0),s.responseType="text",s.onload=function(){i.rank(t,s.responseText)},s.send()}}),!1),i.body.addEventListener("on set name",(function(e){var t=r.counter.getTime(),n={name:""!==e.detail.name.trim()?e.detail.name.trim():"-",score:r.score,time:"".concat(t.mins,":").concat(t.secs,":").concat(t.tenths)};request=new XMLHttpRequest,request.open("POST","datas",!0),request.setRequestHeader("Content-Type","application/json;charset=UTF-8"),request.responseType="json",request.onload=function(){var e=request.response.slice(0,s.rankingLimit);i.scores(e)},request.send(JSON.stringify(n))}),!1),i.body.addEventListener("on replay",(function(e){r.replay()}),!1)})()})();